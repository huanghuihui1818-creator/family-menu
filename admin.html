<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>èœå•åå°</title>
  <style>
    body{font-family:system-ui;max-width:900px;margin:24px auto;padding:0 14px;}
    textarea{width:100%;min-height:380px;border:1px solid #ddd;border-radius:12px;padding:12px;font-family:ui-monospace,Menlo,Consolas,monospace}
    button{padding:10px 14px;border-radius:12px;border:1px solid #ddd;background:#fff;cursor:pointer;margin-right:8px}
    .muted{color:#666;font-size:13px}
  </style>
</head>
<body>
  <h1>ğŸ§° èœå•åå°</h1>
  <p class="muted">æ”¹å®Œåç‚¹â€œå¯¼å‡º JSONâ€ï¼ŒæŠŠå†…å®¹å¤åˆ¶å› GitHub çš„ menu.json æ–‡ä»¶å³å¯ã€‚</p>

  <div>
    <button id="loadBtn">åŠ è½½å½“å‰ menu.json</button>
    <button id="validateBtn">æ ¡éªŒ JSON</button>
    <button id="exportBtn">å¯¼å‡º JSONï¼ˆå¤åˆ¶ç”¨ï¼‰</button>
    <a href="./index.html">â† è¿”å›æŠ½èœå•</a>
  </div>

  <p class="muted" id="msg"></p>
  <textarea id="ta" placeholder="è¿™é‡Œä¼šæ˜¾ç¤º menu.json å†…å®¹"></textarea>

<script>
const $ = (id)=>document.getElementById(id);
function setMsg(t){ $("msg").textContent = t; }

$("loadBtn").onclick = async ()=>{
  const r = await fetch("./menu.json?v=" + Date.now());
  const txt = await r.text();
  $("ta").value = txt;
  setMsg("å·²åŠ è½½å½“å‰ menu.json");
};

$("validateBtn").onclick = ()=>{
  try{
    JSON.parse($("ta").value);
    setMsg("âœ… JSON æ­£å¸¸");
  }catch(e){
    setMsg("âŒ JSON æœ‰é—®é¢˜ï¼š " + e.message);
  }
};

$("exportBtn").onclick = async ()=>{
  try{
    const obj = JSON.parse($("ta").value);
    const pretty = JSON.stringify(obj, null, 2);
    await navigator.clipboard.writeText(pretty);
    setMsg("âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼šå» GitHub æ‰“å¼€ menu.json ç²˜è´´è¦†ç›–å¹¶æäº¤å³å¯");
  }catch(e){
    setMsg("âŒ æ— æ³•å¯¼å‡ºï¼š " + e.message);
  }
};
</script>
</body>
</html>
